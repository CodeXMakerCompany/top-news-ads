{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["import React, { useState, useRef, useImperativeHandle } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ArrowRight from '@material-ui/icons/ArrowRight';\nimport clsx from 'clsx';\nconst TRANSPARENT = 'rgba(0,0,0,0)';\nconst useMenuItemStyles = makeStyles((theme) => ({\n    root: (props) => ({\n        backgroundColor: props.open ? theme.palette.action.hover : TRANSPARENT\n    })\n}));\n/**\n * Use as a drop-in replacement for `<MenuItem>` when you need to add cascading\n * menu elements as children to this component.\n */\nconst NestedMenuItem = React.forwardRef(function NestedMenuItem(props, ref) {\n    const { parentMenuOpen, component = 'div', label, rightIcon = React.createElement(ArrowRight, null), children, className, tabIndex: tabIndexProp, MenuProps = {}, ContainerProps: ContainerPropsProp = {}, ...MenuItemProps } = props;\n    const { ref: containerRefProp, ...ContainerProps } = ContainerPropsProp;\n    const menuItemRef = useRef(null);\n    useImperativeHandle(ref, () => menuItemRef.current);\n    const containerRef = useRef(null);\n    useImperativeHandle(containerRefProp, () => containerRef.current);\n    const menuContainerRef = useRef(null);\n    const [isSubMenuOpen, setIsSubMenuOpen] = useState(false);\n    const handleMouseEnter = (event) => {\n        var _a;\n        setIsSubMenuOpen(true);\n        if ((_a = ContainerProps) === null || _a === void 0 ? void 0 : _a.onMouseEnter) {\n            ContainerProps.onMouseEnter(event);\n        }\n    };\n    const handleMouseLeave = (event) => {\n        var _a;\n        setIsSubMenuOpen(false);\n        if ((_a = ContainerProps) === null || _a === void 0 ? void 0 : _a.onMouseLeave) {\n            ContainerProps.onMouseLeave(event);\n        }\n    };\n    // Check if any immediate children are active\n    const isSubmenuFocused = () => {\n        var _a, _b, _c, _d;\n        const active = (_b = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.activeElement;\n        for (const child of (_d = (_c = menuContainerRef.current) === null || _c === void 0 ? void 0 : _c.children, (_d !== null && _d !== void 0 ? _d : []))) {\n            if (child === active) {\n                return true;\n            }\n        }\n        return false;\n    };\n    const handleFocus = (event) => {\n        var _a;\n        if (event.target === containerRef.current) {\n            setIsSubMenuOpen(true);\n        }\n        if ((_a = ContainerProps) === null || _a === void 0 ? void 0 : _a.onFocus) {\n            ContainerProps.onFocus(event);\n        }\n    };\n    const handleKeyDown = (event) => {\n        var _a, _b, _c, _d, _e;\n        if (event.key === 'Escape') {\n            return;\n        }\n        if (isSubmenuFocused()) {\n            event.stopPropagation();\n        }\n        const active = (_b = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.activeElement;\n        if (event.key === 'ArrowLeft' && isSubmenuFocused()) {\n            (_c = containerRef.current) === null || _c === void 0 ? void 0 : _c.focus();\n        }\n        if (event.key === 'ArrowRight' &&\n            event.target === containerRef.current &&\n            event.target === active) {\n            const firstChild = (_d = menuContainerRef.current) === null || _d === void 0 ? void 0 : _d.children[0];\n            (_e = firstChild) === null || _e === void 0 ? void 0 : _e.focus();\n        }\n    };\n    const open = isSubMenuOpen && parentMenuOpen;\n    const menuItemClasses = useMenuItemStyles({ open });\n    // Root element must have a `tabIndex` attribute for keyboard navigation\n    let tabIndex;\n    if (!props.disabled) {\n        tabIndex = tabIndexProp !== undefined ? tabIndexProp : -1;\n    }\n    return (React.createElement(\"div\", Object.assign({}, ContainerProps, { ref: containerRef, onFocus: handleFocus, tabIndex: tabIndex, onMouseEnter: handleMouseEnter, onMouseLeave: handleMouseLeave, onKeyDown: handleKeyDown }),\n        React.createElement(MenuItem, Object.assign({}, MenuItemProps, { className: clsx(menuItemClasses.root, className), ref: menuItemRef }),\n            label,\n            rightIcon),\n        React.createElement(Menu\n        // Set pointer events to 'none' to prevent the invisible Popover div\n        // from capturing events for clicks and hovers\n        , { \n            // Set pointer events to 'none' to prevent the invisible Popover div\n            // from capturing events for clicks and hovers\n            style: { pointerEvents: 'none' }, anchorEl: menuItemRef.current, anchorOrigin: {\n                vertical: 'top',\n                horizontal: 'right'\n            }, transformOrigin: {\n                vertical: 'top',\n                horizontal: 'left'\n            }, open: open, autoFocus: false, disableAutoFocus: true, disableEnforceFocus: true, onClose: () => {\n                setIsSubMenuOpen(false);\n            } },\n            React.createElement(\"div\", { ref: menuContainerRef, style: { pointerEvents: 'auto' } }, children))));\n});\nexport default NestedMenuItem;\n"],"names":[],"mappings":"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"}